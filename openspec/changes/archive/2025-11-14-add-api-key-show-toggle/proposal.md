# 添加 API Key 显示/隐藏切换功能

## 摘要

在配置页面的 API Key 输入框中添加显示/隐藏切换功能，允许用户查看明文 API Key，提升用户体验和可操作性。

## 问题描述

当前配置页面中的 API Key 输入框使用 `type="password"`，无法查看输入内容。这导致以下问题：

1. **无法验证输入**: 用户无法确认 API Key 是否正确输入
2. **复制困难**: 用户难以复制或验证 API Key 的完整性
3. **编辑困难**: 在编辑模式下，用户无法确认当前存储的 API Key 是否正确
4. **安全性考虑**: 虽然本地存储相对安全，但用户应该有查看自己数据的选择权

## Why

添加显示/隐藏切换功能是必要的，因为：

1. **用户验证**: 用户需要能够验证 API Key 输入是否正确，避免因输入错误导致的连接问题
2. **可访问性**: 提升用户体验，允许用户在需要时查看敏感信息
3. **调试友好**: 当 API 调用失败时，用户可以快速检查 API Key 是否正确
4. **行业标准**: 这是业界标准 UX 模式，广泛应用于各种应用的密码/密钥输入
5. **用户控制**: 给用户选择权，可以根据需要切换显示/隐藏状态

## What Changes

1. **导入图标**: 从 `lucide-react` 导入 `Eye` 和 `EyeOff` 图标
2. **添加切换状态**: 在需要输入 API Key 的组件中添加 `showApiKey` 状态变量
3. **添加切换按钮**: 在 API Key 输入框右侧添加眼睛图标按钮
4. **切换输入类型**: 根据状态在 `type="password"` 和 `type="text"` 之间切换
5. **应用位置**:
   - 添加模型对话框中的 API Key 字段
   - 模型卡片编辑模式下的 API Key 字段

## 解决方案

使用标准的密码显示/隐藏切换模式：

### 核心方法

1. **状态管理**: 使用 React `useState` 管理显示/隐藏状态
2. **图标切换**: 根据状态显示 `Eye`（显示）或 `EyeOff`（隐藏）图标
3. **按钮交互**: 点击按钮切换状态，添加适当的标题提示
4. **样式设计**: 确保按钮与现有 UI 风格一致

### 技术优势

- **零依赖**: 使用项目现有的 `lucide-react` 图标库
- **简单实现**: 只需几行代码即可实现
- **直观操作**: 标准的眼睛图标，用户易于理解
- **无障碍**: 提供 `title` 属性和语义化的按钮

## 范围

- **修改文件**:
  - `src/pages/Settings.tsx` - 在两个位置添加显示/隐藏功能

- **影响组件**:
  - 添加模型对话框 (`AlertDialog`)
  - 模型卡片编辑模式 (`ModelCard` 组件)

## 验收标准

- [ ] 添加模型对话框中的 API Key 输入框可以切换显示/隐藏
- [ ] 模型卡片编辑模式下的 API Key 输入框可以切换显示/隐藏
- [ ] 点击眼睛图标可以正确切换显示状态
- [ ] 切换时图标正确变化（Eye ↔ EyeOff）
- [ ] 按钮有合适的 hover 效果和标题提示
- [ ] 切换功能不影响现有的输入验证和保存逻辑

## 风险

- **低**:
  - 只添加 UI 功能，不改变数据存储逻辑
  - 使用标准的 React 状态管理
  - 不影响现有功能，只增加用户体验
  - 回退简单：移除切换功能即可

## 相关资源

- Lucide React Icons: https://lucide.dev/icons/eye
- 当前使用位置: `src/pages/Settings.tsx`
