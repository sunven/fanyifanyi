# æ›´æ–°ç­¾åè®¾ç½®æŒ‡å—

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•ä¸º fanyifanyi åº”ç”¨è®¾ç½®æ›´æ–°ç­¾ååŠŸèƒ½ã€‚

## æ¦‚è¿°

Tauri çš„è‡ªåŠ¨æ›´æ–°åŠŸèƒ½éœ€è¦ä½¿ç”¨å¯†é’¥å¯¹æ¥ç­¾åæ›´æ–°åŒ…ï¼Œç¡®ä¿ç”¨æˆ·ä¸‹è½½çš„æ›´æ–°æ˜¯å¯ä¿¡çš„ã€‚

## å¿«é€Ÿå¼€å§‹

### 1. ç”Ÿæˆå¯†é’¥å¯¹

è¿è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆç­¾åå¯†é’¥å¯¹ï¼š

```bash
./scripts/setup-signing.sh
```

æˆ–è€…æ‰‹åŠ¨è¿è¡Œï¼š

```bash
mkdir -p .tauri
pnpm tauri signer generate -w .tauri/fanyifanyi.key
```

ç³»ç»Ÿä¼šæç¤ºä½ è¾“å…¥å¯†ç æ¥ä¿æŠ¤ç§é’¥ã€‚**è¯·ä½¿ç”¨å¼ºå¯†ç å¹¶å¦¥å–„ä¿ç®¡ï¼**

### 2. æ›´æ–°é…ç½®æ–‡ä»¶

ç”Ÿæˆå¯†é’¥åï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤å°†å…¬é’¥è‡ªåŠ¨æ·»åŠ åˆ° `tauri.conf.json`ï¼š

```bash
node scripts/update-pubkey.cjs
```

æˆ–è€…æ‰‹åŠ¨å¤åˆ¶å…¬é’¥å†…å®¹ï¼š

```bash
cat .tauri/fanyifanyi.key.pub
```

ç„¶åå°†å†…å®¹ç²˜è´´åˆ° `src-tauri/tauri.conf.json` çš„ `bundle.updater.pubkey` å­—æ®µã€‚

### 3. éªŒè¯è®¾ç½®

æ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š

- âœ… `.tauri/fanyifanyi.key` æ–‡ä»¶å­˜åœ¨ï¼ˆç§é’¥ï¼‰
- âœ… `.tauri/fanyifanyi.key.pub` æ–‡ä»¶å­˜åœ¨ï¼ˆå…¬é’¥ï¼‰
- âœ… `src-tauri/tauri.conf.json` ä¸­çš„ `pubkey` å­—æ®µå·²æ›´æ–°
- âœ… `.gitignore` åŒ…å« `.tauri/` ç›®å½•ï¼ˆç§é’¥ä¸åº”æäº¤ï¼‰

## å¯†é’¥ç®¡ç†

### ç§é’¥å®‰å…¨

**é‡è¦æé†’ï¼š**

- ğŸ”’ **ç§é’¥æ–‡ä»¶** (`.tauri/fanyifanyi.key`) åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œ**ç»ä¸åº”æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶**
- ğŸ’¾ è¯·å°†ç§é’¥å¤‡ä»½åˆ°å®‰å…¨ä½ç½®ï¼ˆå¯†ç ç®¡ç†å™¨ã€åŠ å¯†å­˜å‚¨ç­‰ï¼‰
- ğŸ”‘ è®°ä½ä¿æŠ¤ç§é’¥çš„å¯†ç 
- ğŸ‘¥ åœ¨å›¢é˜Ÿä¸­ï¼Œåªæœ‰è´Ÿè´£å‘å¸ƒçš„äººå‘˜éœ€è¦ç§é’¥

### å…¬é’¥åˆ†å‘

- ğŸ“¢ **å…¬é’¥** (`.tauri/fanyifanyi.key.pub`) åº”è¯¥æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
- ğŸ”“ å…¬é’¥ä¼šè¢«ç¼–è¯‘åˆ°åº”ç”¨ä¸­ï¼Œç”¨äºéªŒè¯æ›´æ–°ç­¾å
- âœ… å…¬é’¥å¯ä»¥å…¬å¼€åˆ†äº«

### å¯†é’¥è½®æ¢

å¦‚æœéœ€è¦æ›´æ¢å¯†é’¥ï¼ˆä¾‹å¦‚ç§é’¥æ³„éœ²ï¼‰ï¼š

1. ç”Ÿæˆæ–°çš„å¯†é’¥å¯¹
2. æ›´æ–° `tauri.conf.json` ä¸­çš„å…¬é’¥
3. ä½¿ç”¨æ–°ç§é’¥ç­¾åæ‰€æœ‰åç»­ç‰ˆæœ¬
4. æ—§ç‰ˆæœ¬åº”ç”¨éœ€è¦æ›´æ–°æ‰èƒ½ä½¿ç”¨æ–°å¯†é’¥

## ç­¾åæ›´æ–°åŒ…

åœ¨æ„å»ºå‘å¸ƒç‰ˆæœ¬æ—¶ï¼Œä½¿ç”¨ç§é’¥ç­¾åï¼š

```bash
# æ„å»ºåº”ç”¨
pnpm tauri build

# ç­¾åä¼šåœ¨æ„å»ºè¿‡ç¨‹ä¸­è‡ªåŠ¨å®Œæˆ
# æˆ–è€…æ‰‹åŠ¨ç­¾åç‰¹å®šæ–‡ä»¶
pnpm tauri signer sign /path/to/bundle --private-key .tauri/fanyifanyi.key
```

è¯¦è§ `scripts/build-release.sh` è„šæœ¬ã€‚

## æ•…éšœæ’é™¤

### æ‰¾ä¸åˆ°å¯†é’¥æ–‡ä»¶

ç¡®ä¿å·²è¿è¡Œ `setup-signing.sh` è„šæœ¬ç”Ÿæˆå¯†é’¥ã€‚

### å¯†ç é”™è¯¯

å¦‚æœå¿˜è®°ç§é’¥å¯†ç ï¼Œéœ€è¦é‡æ–°ç”Ÿæˆå¯†é’¥å¯¹ã€‚

### ç­¾åéªŒè¯å¤±è´¥

- æ£€æŸ¥ `tauri.conf.json` ä¸­çš„å…¬é’¥æ˜¯å¦æ­£ç¡®
- ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ç§é’¥ç­¾å
- éªŒè¯æ›´æ–°æ¸…å•ä¸­çš„ç­¾åå­—æ®µ

## æ–‡æ¡£å¯¼èˆª

### æœ¬é¡¹ç›®æ–‡æ¡£

- **[README.md](./README.md)** - è„šæœ¬ä½¿ç”¨è¯´æ˜å’Œå¿«é€Ÿå¼€å§‹
- **[SIGNING_SETUP.md](./SIGNING_SETUP.md)** - æœ¬æ–‡æ¡£ï¼Œç­¾åå¯†é’¥è®¾ç½®è¯¦ç»†æŒ‡å—
- **[RELEASE_GUIDE.md](./RELEASE_GUIDE.md)** - å®Œæ•´çš„å‘å¸ƒæµç¨‹å’Œç‰ˆæœ¬ç®¡ç†
- **[DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md)** - æ›´æ–°æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—

### ç›¸å…³è„šæœ¬

- `scripts/setup-signing.sh` - ç”Ÿæˆç­¾åå¯†é’¥å¯¹
- `scripts/update-pubkey.cjs` - æ›´æ–°é…ç½®ä¸­çš„å…¬é’¥
- `scripts/build-release.sh` - æ„å»ºå’Œç­¾åå‘å¸ƒç‰ˆæœ¬
- `scripts/generate-manifest.js` - ç”Ÿæˆæ›´æ–°æ¸…å•

### å®˜æ–¹æ–‡æ¡£

- [Tauri ç­¾åæ–‡æ¡£](https://v2.tauri.app/distribute/sign/)
- [Tauri Updater æ’ä»¶æ–‡æ¡£](https://v2.tauri.app/plugin/updater/)
- [Tauri åˆ†å‘æ–‡æ¡£](https://v2.tauri.app/distribute/)
